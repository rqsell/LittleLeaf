{"ast":null,"code":"import axios from \"axios\";\nimport baseURL from \"./config.js\";\nimport { NotificationContainer, NotificationManager } from \"react-notifications\";\nconsole.log(baseURL);\nconst token = window.localStorage.getItem(\"token\");\nlet t = token ? token.substring(0, 15) : null;\nconsole.log(\"TOKEN\", t, \"NODE_ENV\", process.env.NODE_ENV);\n\nlet resetHead = () => {\n  return {\n    headers: {\n      Authorization: `Bearer ${window.localStorage.getItem(\"token\")}`\n    }\n  };\n};\n\nconst API = axios.create({\n  withCredentials: true,\n  baseURL,\n  headers: {\n    Authorization: `Bearer ${token}`\n  }\n});\nconst actions = {\n  getUser: async () => {\n    return await API.get(`/user`, resetHead());\n  },\n  signUp: async user => {\n    var _res$data;\n\n    let res = await API.post(\"/signup\", user, resetHead());\n    window.localStorage.setItem(\"token\", res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.token);\n    return res;\n  },\n  logIn: async user => {\n    var _res$data2;\n\n    let res = await API.post(\"/login\", user, resetHead());\n    window.localStorage.setItem(\"token\", res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.token);\n    return res;\n  },\n  logOut: async () => {\n    window.localStorage.removeItem(\"token\");\n    return await API.get(\"/logout\", resetHead());\n  },\n  addapost: async data => {\n    return await API.post(\"/AddAPost\", data, resetHead());\n  },\n  getAllGoals: async goal => {\n    return await API.get(`/GetAllGoal`, resetHead());\n  },\n  getGoalDetails: async goalid => {\n    return await API.get(`/GetGoals/${goalid}`, resetHead());\n  },\n  AddTaskDB: async data => {\n    return await API.post(\"/AddTaskDB\", data, resetHead());\n  },\n  getAllTasks: async tasks => {\n    console.log(tasks);\n    return await API.get(\"/getAllTasks\", tasks, resetHead());\n  }\n};\nAPI.interceptors.response.use(response => response, error => {\n  var _error$response, _error$response2, _error$response3;\n\n  console.error(error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n  if ((error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data.name) !== \"JsonWebTokenError\") NotificationManager.error(String(error === null || error === void 0 ? void 0 : (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data.message));else NotificationManager.error(\"Please signup or login\");\n});\nexport default actions;","map":{"version":3,"sources":["/Users/rebeccasell/Documents/project-4/LittleLeaf/frontend/src/api/index.js"],"names":["axios","baseURL","NotificationContainer","NotificationManager","console","log","token","window","localStorage","getItem","t","substring","process","env","NODE_ENV","resetHead","headers","Authorization","API","create","withCredentials","actions","getUser","get","signUp","user","res","post","setItem","data","logIn","logOut","removeItem","addapost","getAllGoals","goal","getGoalDetails","goalid","AddTaskDB","getAllTasks","tasks","interceptors","response","use","error","name","String","message"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport baseURL from \"./config.js\";\nimport {\n  NotificationContainer,\n  NotificationManager,\n} from \"react-notifications\";\n\nconsole.log(baseURL);\n\nconst token = window.localStorage.getItem(\"token\");\nlet t = token ? token.substring(0, 15) : null;\n\nconsole.log(\"TOKEN\", t, \"NODE_ENV\", process.env.NODE_ENV);\n\nlet resetHead = () => {\n  return {\n    headers: {\n      Authorization: `Bearer ${window.localStorage.getItem(\"token\")}`,\n    },\n  };\n};\n\nconst API = axios.create({\n  withCredentials: true,\n  baseURL,\n  headers: { Authorization: `Bearer ${token}` },\n});\n\nconst actions = {\n  getUser: async () => {\n    return await API.get(`/user`, resetHead());\n  },\n  signUp: async (user) => {\n    let res = await API.post(\"/signup\", user, resetHead());\n    window.localStorage.setItem(\"token\", res?.data?.token);\n    return res;\n  },\n  logIn: async (user) => {\n    let res = await API.post(\"/login\", user, resetHead());\n    window.localStorage.setItem(\"token\", res?.data?.token);\n    return res;\n  },\n  logOut: async () => {\n    window.localStorage.removeItem(\"token\");\n    return await API.get(\"/logout\", resetHead());\n  },\n  addapost: async (data) => {\n    return await API.post(\"/AddAPost\", data, resetHead());\n  },\n  getAllGoals: async (goal) => {\n    return await API.get(`/GetAllGoal`, resetHead());\n  },\n  getGoalDetails: async (goalid) => {\n    return await API.get(`/GetGoals/${goalid}`, resetHead());\n  },\n  AddTaskDB: async (data) => {\n    return await API.post(\"/AddTaskDB\", data, resetHead());\n  },\n  getAllTasks: async (tasks) => {\n    console.log(tasks);\n    return await API.get(\"/getAllTasks\", tasks, resetHead());\n  },\n};\n\nAPI.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    console.error(error?.response?.data);\n    if (error?.response?.data.name !== \"JsonWebTokenError\")\n      NotificationManager.error(String(error?.response?.data.message));\n    else NotificationManager.error(\"Please signup or login\");\n  }\n);\n\nexport default actions;\n"]},"metadata":{},"sourceType":"module"}