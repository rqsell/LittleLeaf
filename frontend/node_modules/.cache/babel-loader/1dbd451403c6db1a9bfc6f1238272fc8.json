{"ast":null,"code":"/*!\nFullCalendar v5.3.1\nDocs & License: https://fullcalendar.io/\n(c) 2020 Adam Shaw\n*/\nimport './vdom';\nimport { __extends, __assign } from 'tslib';\nimport { render, createElement, CalendarRoot, CustomContentRenderContext, CalendarContent, flushToDom, DelayedRunner, CalendarDataManager, isArraysEqual, applyStyleProp, CalendarApi } from '@fullcalendar/common';\nexport * from '@fullcalendar/common';\n\nvar Calendar =\n/** @class */\nfunction (_super) {\n  __extends(Calendar, _super);\n\n  function Calendar(el, optionOverrides) {\n    if (optionOverrides === void 0) {\n      optionOverrides = {};\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.isRendering = false;\n    _this.isRendered = false;\n    _this.currentClassNames = [];\n    _this.customContentRenderId = 0; // will affect custom generated classNames?\n\n    _this.handleAction = function (action) {\n      // actions we know we want to render immediately\n      switch (action.type) {\n        case 'SET_EVENT_DRAG':\n        case 'SET_EVENT_RESIZE':\n          _this.renderRunner.tryDrain();\n\n      }\n    };\n\n    _this.handleData = function (data) {\n      _this.currentData = data;\n\n      _this.renderRunner.request(data.calendarOptions.rerenderDelay);\n    };\n\n    _this.handleRenderRequest = function () {\n      if (_this.isRendering) {\n        _this.isRendered = true;\n        var currentData_1 = _this.currentData;\n        render(createElement(CalendarRoot, {\n          options: currentData_1.calendarOptions,\n          theme: currentData_1.theme,\n          emitter: currentData_1.emitter\n        }, function (classNames, height, isHeightAuto, forPrint) {\n          _this.setClassNames(classNames);\n\n          _this.setHeight(height);\n\n          return createElement(CustomContentRenderContext.Provider, {\n            value: _this.customContentRenderId\n          }, createElement(CalendarContent, __assign({\n            isHeightAuto: isHeightAuto,\n            forPrint: forPrint\n          }, currentData_1)));\n        }), _this.el);\n      } else if (_this.isRendered) {\n        _this.isRendered = false;\n        render(null, _this.el);\n\n        _this.setClassNames([]);\n\n        _this.setHeight('');\n      }\n\n      flushToDom();\n    };\n\n    _this.el = el;\n    _this.renderRunner = new DelayedRunner(_this.handleRenderRequest);\n    new CalendarDataManager({\n      optionOverrides: optionOverrides,\n      calendarApi: _this,\n      onAction: _this.handleAction,\n      onData: _this.handleData\n    });\n    return _this;\n  }\n\n  Object.defineProperty(Calendar.prototype, \"view\", {\n    get: function () {\n      return this.currentData.viewApi;\n    } // for public API\n    ,\n    enumerable: false,\n    configurable: true\n  });\n\n  Calendar.prototype.render = function () {\n    var wasRendering = this.isRendering;\n\n    if (!wasRendering) {\n      this.isRendering = true;\n    } else {\n      this.customContentRenderId++;\n    }\n\n    this.renderRunner.request();\n\n    if (wasRendering) {\n      this.updateSize();\n    }\n  };\n\n  Calendar.prototype.destroy = function () {\n    if (this.isRendering) {\n      this.isRendering = false;\n      this.renderRunner.request();\n    }\n  };\n\n  Calendar.prototype.updateSize = function () {\n    _super.prototype.updateSize.call(this);\n\n    flushToDom();\n  };\n\n  Calendar.prototype.batchRendering = function (func) {\n    this.renderRunner.pause('batchRendering');\n    func();\n    this.renderRunner.resume('batchRendering');\n  };\n\n  Calendar.prototype.pauseRendering = function () {\n    this.renderRunner.pause('pauseRendering');\n  };\n\n  Calendar.prototype.resumeRendering = function () {\n    this.renderRunner.resume('pauseRendering', true);\n  };\n\n  Calendar.prototype.resetOptions = function (optionOverrides, append) {\n    this.currentDataManager.resetOptions(optionOverrides, append);\n  };\n\n  Calendar.prototype.setClassNames = function (classNames) {\n    if (!isArraysEqual(classNames, this.currentClassNames)) {\n      var classList = this.el.classList;\n\n      for (var _i = 0, _a = this.currentClassNames; _i < _a.length; _i++) {\n        var className = _a[_i];\n        classList.remove(className);\n      }\n\n      for (var _b = 0, classNames_1 = classNames; _b < classNames_1.length; _b++) {\n        var className = classNames_1[_b];\n        classList.add(className);\n      }\n\n      this.currentClassNames = classNames;\n    }\n  };\n\n  Calendar.prototype.setHeight = function (height) {\n    applyStyleProp(this.el, 'height', height);\n  };\n\n  return Calendar;\n}(CalendarApi);\n\nexport { Calendar };","map":{"version":3,"sources":["src/Calendar.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  CalendarOptions, Action, CalendarContent, render, createElement, DelayedRunner, CssDimValue, applyStyleProp,\n  CalendarApi, CalendarRoot, isArraysEqual, CalendarDataManager, CalendarData,\n  CustomContentRenderContext, flushToDom\n } from '@fullcalendar/common'\n\n\nexport class Calendar extends CalendarApi {\n\n  currentData: CalendarData\n  renderRunner: DelayedRunner\n  el: HTMLElement\n  isRendering = false\n  isRendered = false\n  currentClassNames: string[] = []\n  customContentRenderId = 0 // will affect custom generated classNames?\n\n  get view() { return this.currentData.viewApi } // for public API\n\n\n  constructor(el: HTMLElement, optionOverrides: CalendarOptions = {}) {\n    super()\n\n    this.el = el\n    this.renderRunner = new DelayedRunner(this.handleRenderRequest)\n\n    new CalendarDataManager({\n      optionOverrides,\n      calendarApi: this,\n      onAction: this.handleAction,\n      onData: this.handleData\n    })\n  }\n\n\n  handleAction = (action: Action) => {\n    // actions we know we want to render immediately\n    switch (action.type) {\n      case 'SET_EVENT_DRAG':\n      case 'SET_EVENT_RESIZE':\n        this.renderRunner.tryDrain()\n    }\n  }\n\n\n  handleData = (data: CalendarData) => {\n    this.currentData = data\n    this.renderRunner.request(data.calendarOptions.rerenderDelay)\n  }\n\n\n  handleRenderRequest = () => {\n\n    if (this.isRendering) {\n      this.isRendered = true\n      let { currentData } = this\n\n      render(\n        <CalendarRoot options={currentData.calendarOptions} theme={currentData.theme} emitter={currentData.emitter}>\n          {(classNames, height, isHeightAuto, forPrint) => {\n            this.setClassNames(classNames)\n            this.setHeight(height)\n\n            return (\n              <CustomContentRenderContext.Provider value={this.customContentRenderId}>\n                <CalendarContent\n                  isHeightAuto={isHeightAuto}\n                  forPrint={forPrint}\n                  {...currentData}\n                />\n              </CustomContentRenderContext.Provider>\n            )\n          }}\n        </CalendarRoot>,\n        this.el\n      )\n\n    } else if (this.isRendered) {\n      this.isRendered = false\n      render(null, this.el)\n      this.setClassNames([])\n      this.setHeight('')\n    }\n\n    flushToDom()\n  }\n\n\n  render() {\n    let wasRendering = this.isRendering\n\n    if (!wasRendering) {\n      this.isRendering = true\n    } else {\n      this.customContentRenderId++\n    }\n\n    this.renderRunner.request()\n\n    if (wasRendering) {\n      this.updateSize()\n    }\n  }\n\n\n  destroy() {\n    if (this.isRendering) {\n      this.isRendering = false\n      this.renderRunner.request()\n    }\n  }\n\n\n  updateSize() {\n    super.updateSize()\n    flushToDom()\n  }\n\n\n  batchRendering(func) {\n    this.renderRunner.pause('batchRendering')\n    func()\n    this.renderRunner.resume('batchRendering')\n  }\n\n\n  pauseRendering() { // available to plugins\n    this.renderRunner.pause('pauseRendering')\n  }\n\n\n  resumeRendering() { // available to plugins\n    this.renderRunner.resume('pauseRendering', true)\n  }\n\n\n  resetOptions(optionOverrides, append?) {\n    this.currentDataManager.resetOptions(optionOverrides, append)\n  }\n\n\n  setClassNames(classNames: string[]) {\n    if (!isArraysEqual(classNames, this.currentClassNames)) {\n      let { classList } = this.el\n\n      for (let className of this.currentClassNames) {\n        classList.remove(className)\n      }\n\n      for (let className of classNames) {\n        classList.add(className)\n      }\n\n      this.currentClassNames = classNames\n    }\n  }\n\n\n  setHeight(height: CssDimValue) {\n    applyStyleProp(this.el, 'height', height)\n  }\n\n}\n"]},"metadata":{},"sourceType":"module"}